#!/usr/bin/env node

function formatLargeNumber(num, decimals = 18) {
    let numStr = BigInt(num).toString(); // Convert number to string

   // Ensure the number has at least 'decimals' digits for decimal separation
    if (numStr.length < decimals) {
        numStr = numStr.padStart(decimals, '0'); // Pad with leading zeros
        return "0_" + numStr;
    }
    let rightPart = numStr.slice(-decimals); // Last 'decimals' digits (treated as "decimal" part)
    let leftPart = numStr.slice(0, -decimals); // Remaining digits on the left

    // Format the left part with underscores every 3 digits
    let formattedLeft = leftPart.replace(/\B(?=(\d{3})+(?!\d))/g, "_");

    return formattedLeft + "_" + rightPart;
}

// CLI support
if (require.main === module) {
    const args = process.argv.slice(2);
    if (args.length < 1) {
        console.error("Usage: node script.js <number> [decimals]");
        process.exit(1);
    }
    const number = args[0];
    const decimals = args.length > 1 ? parseInt(args[1], 10) : 18;
    console.log(formatLargeNumber(number, decimals));
}